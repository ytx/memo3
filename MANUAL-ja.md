# memo3 操作マニュアル

memo3は、Electron とACE エディターを使用したマークダウン対応のメモアプリケーションです。VSCode のような多タブ編集機能と、ファイルシステムベースの管理機能を提供します。

## 目次
1. [起動と初期設定](#起動と初期設定)
2. [基本操作](#基本操作)
3. [ファイル管理](#ファイル管理)
4. [タブ管理](#タブ管理)
5. [検索機能](#検索機能)
6. [設定とカスタマイズ](#設定とカスタマイズ)
7. [コンテキストメニュー](#コンテキストメニュー)
8. [キーボードショートカット](#キーボードショートカット)
9. [セッション復元](#セッション復元)

---

## 起動と初期設定

### 起動方法
- **開発モード**: `npm run dev`
- **本番モード**: `npm start`

### 初期設定
1. アプリ起動後、設定画面でルートフォルダーを選択
2. 選択したフォルダー内の `.md` および `.txt` ファイルが自動的に読み込まれます
3. ファイルリストは更新日時の降順で表示されます

---

## 基本操作

### ファイルの表示
- ファイルリストには以下が表示されます：
  - **タイトル**: ファイルの最初の非空行
  - **ファイル名**: 実際のファイル名
  - **更新日時**: YYYY/MM/DD HH:MM 形式

### 新規ファイル作成
1. **+** ボタンをクリック
2. エディターに「タイトルを入力してください」プレースホルダーが表示
3. 2行以上の非空行を入力すると自動的にファイルが作成されます
4. ファイル名は最初の行（最大16文字）+ `.md` 拡張子で自動生成
5. 重複する場合は自動的に (2), (3) などが付加されます

### 自動保存機能
- 編集後5秒で自動保存
- 変更がない場合は保存をスキップ
- タブを閉じる際に未保存の変更があれば自動保存

---

## ファイル管理

### ファイルの開き方
- ファイルリストから該当ファイルをクリック
- 新しいタブで開きます（既存のタブがある場合は自動で閉じられることがあります）

### ファイルの削除
1. ファイルを右クリック
2. **削除** を選択
3. 確認ダイアログで削除を実行

### ファイル名の更新
1. ファイルを右クリック
2. **ファイル名更新** を選択
3. ファイル内容の最初の行に基づいて自動更新

### リアルタイム更新
- ファイルシステムの変更を自動検出
- ファイルリストの順序が自動更新
- 外部エディターでの変更も反映

---

## タブ管理

### タブの操作
- **新規タブ**: + ボタンをクリック
- **タブの並び替え**: ドラッグ&ドロップで順序変更
- **タブを閉じる**: タブの × ボタンをクリック
- **アクティブタブ**: 選択中のタブは視覚的に区別表示

### タブタイトル
- ファイル内容の最初の非空行がタブタイトルになります
- 内容を変更するとタイトルも自動更新

---

## 検索機能

### 検索の実行
1. 検索ボックスに検索語を入力
2. ファイル名と内容の両方を同時検索
3. 結果は以下に分類表示：
   - **ファイル名マッチ**: 青色表示
   - **内容マッチ**: ティール色表示、行番号付き

### 検索結果の操作
- 検索結果をクリックして該当ファイルを直接開く
- **×** ボタンで検索結果をクリア

### エディター内検索（Emacsキーバインド使用時）
- **Ctrl+S**: 検索開始/次の候補
- **Ctrl+R**: 前の候補
- **Ctrl+G**: 検索終了

---

## 設定とカスタマイズ

### 設定項目
- **キーバインド**: 標準またはEmacs
- **テーマ**: 7種類以上のACEエディターテーマ
- **フォントサイズ**: 調整可能
- **ホワイトスペース表示**: オン/オフ切り替え
- **ルートフォルダー**: メモ保存先の変更

### テーマシステム
- ACEエディターのテーマ選択
- アプリ全体の色がエディターテーマに自動連動
- 対応テーマ: Monokai, GitHub, Tomorrow, Twilight, Solarized, Dracula など

### 設定の保存
- 設定変更は即座に保存
- 設定ファイル: `settings.json`
- アプリ再起動は不要

---

## コンテキストメニュー

### ファイルリストでの右クリック
- **ファイル名更新**: 内容に基づく自動リネーム
- **削除**: 確認付きファイル削除

### ステータスバーでの右クリック
- **開発者ツール**: 別ウィンドウで開発者ツールを表示

### エディターでの右クリック
- **URLを開く**: URL上で右クリックしてブラウザーで開く
- **Googleで検索**: 選択テキストをGoogleで検索
- **標準編集機能**: コピー、カット、ペーストなど

### スマートポジショニング
- コンテキストメニューは画面端で自動位置調整
- 常に画面内に表示されます

---

## キーボードショートカット

### 標準ショートカット
- **Ctrl+C / Cmd+C**: コピー
- **Ctrl+X / Cmd+X**: カット
- **Ctrl+V / Cmd+V**: ペースト
- **Ctrl+Z / Cmd+Z**: 元に戻す
- **Ctrl+Y / Cmd+Y**: やり直し

### Emacsキーバインド（設定で有効化時）
- **Ctrl+W**: カット
- **Alt+W**: コピー
- **Ctrl+Y**: ペースト
- **Ctrl+S**: 検索開始/次の候補
- **Ctrl+R**: 前の検索候補
- **Ctrl+G**: 検索終了

### システムクリップボード連携
- 他のアプリケーションとの完全なクリップボード同期
- Windows、macOS、Linux 対応
- 複数層のクリップボード処理で確実な動作

---

## セッション復元

### 自動復元機能
- アプリ起動時に前回のセッション状態を自動復元
- 開いていたタブとアクティブタブを復元
- ファイル内容と編集状態も復元

### セッション管理
- タブ操作の度に自動的にセッション状態を保存
- ファイルが削除された場合は対応するタブも除外
- セッションファイル: `session.json`

### 復元される情報
- 開いていたファイルのタブ
- アクティブなタブ
- エディターの状態
- ファイルの内容

---

## データ管理

### 保存場所
- **メモファイル**: ユーザー選択のルートフォルダー内
- **ワークスペース設定**: `workspace.json`
- **エディター設定**: `settings.json`
- **セッション状態**: `session.json`

### ファイル監視
- chokidar を使用したリアルタイムファイル監視
- 外部での変更を自動検出
- ファイルリストの自動更新

---

## トラブルシューティング

### よくある問題

**ファイルが表示されない**
- ルートフォルダーの設定を確認
- `.md` または `.txt` 拡張子のファイルのみ表示

**タブが復元されない**
- 対象ファイルが存在するか確認
- セッションファイルの破損の可能性

**検索が動作しない**
- ファイルへの読み取り権限を確認
- 検索対象フォルダーのアクセス権限を確認

**テーマが適用されない**
- 設定の再読み込み
- アプリの再起動

### 開発者ツール
- ステータスバーを右クリック → **開発者ツール**
- コンソールでエラーログを確認可能

---

## システム要件
- **Electron**: 37.4.0
- **ACE Editor**: 1.43.2
- **File Watcher**: chokidar 4.0.3
- **対応OS**: Windows, macOS, Linux

---

## 更新履歴
- 最新版では完全なセッション復元とクリップボード統合を実装
- ドラッグ&ドロップによるタブ並び替え機能を追加
- スマートなファイル作成とリアルタイムファイル監視を実装